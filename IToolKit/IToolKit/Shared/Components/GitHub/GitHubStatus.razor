@using API.Tools.MarkdownConverter
@if (lastRelease != null)
{
    <MudButton Size="Size.Small" Class="mr-2" OnClick="()=>showReleaseModal = true">@lastRelease.TagName</MudButton>
}
<MudButton Href="https://github.com/AkbarAsghari/IToolKit"
           StartIcon="@Icons.Custom.Brands.GitHub" Color="Color.Inherit">
    @if (repository != null)
    {
        @repository.StargazersCount
    }
    <MudIcon Size="Size.Small" Icon="@Icons.Material.Filled.Star"></MudIcon>
</MudButton>

@if (lastRelease != null)
{
    <MudDialog @bind-IsVisible="@showReleaseModal" Options="new DialogOptions{CloseButton=true, DisableBackdropClick=true,FullWidth=true,MaxWidth=MaxWidth.Medium}">

        <TitleContent>
            <MudText Typo="Typo.h1">@lastRelease.TagName</MudText>
            <MudText>create at : @lastRelease.CreatedAt.</MudText>
        </TitleContent>
        <DialogContent>
            @((MarkupString)MarkdownConverter.ToHTML(lastRelease!.Body))
        </DialogContent>
        <DialogActions>
            <MudButton Color="Color.Secondary" OnClick="()=>showReleaseModal=false">Cancel</MudButton>
            <MudButton Color="Color.Primary" Variant="Variant.Filled" OnClick="Update">Re-download the latest version</MudButton>
        </DialogActions>
    </MudDialog>
}